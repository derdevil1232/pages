<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Roblox Hopper</title>
  <script>
    (function() {
      const url = new URL(window.location.href);
      const auto = url.searchParams.get("auto");

      const segments = window.location.pathname
        .split("/")
        .filter(Boolean);

      if (segments.length === 0) {
        document.write("No placeId supplied");
        return;
      }

      const placeId = segments[0];
      const instanceId = segments[1] || null;

      // If auto=1 is missing, redirect to the auto=1 version using a script-opened tab
      if (!auto) {
        const target =
          "/" +
          placeId +
          (instanceId ? "/" + instanceId : "") +
          "?auto=1";

        const newTab = window.open(target, "_blank");
        setTimeout(() => {
          try { window.close(); } catch(e) {}
        }, 200);
        return;
      }

      // Normal Roblox launch
      let robloxURL = "roblox://experiences/start?placeId=" + encodeURIComponent(placeId);
      if (instanceId) {
        robloxURL += "&gameInstanceId=" + encodeURIComponent(instanceId);
      }

      window.location.href = robloxURL;

      setTimeout(() => {
        try { window.close(); } catch(e) {}
      }, 30000);
    })();
  </script>
</head>
<body></body>
</html>
